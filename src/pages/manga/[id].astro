---
import Base from "@/layouts/Base.astro";
import MangaInfo from "@/components/manga/Info.astro";
import { getMangaData } from "@/services/fetchData";
import { mapMangaDataSingle } from "@/utils/map";

const { id } = Astro.params;

if (!id) {
  return Astro.redirect("/");
}

const { data } = await getMangaData(id);
const mappedData = mapMangaDataSingle(data);
---

<Base>
  <Fragment slot={"main"}>
    <MangaInfo data={mappedData} />
  </Fragment>
</Base>
